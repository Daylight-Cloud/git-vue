import{_ as R,r as p,c as k,b as q,e as o,w as r,g as u,i as C,d as E,m as n,h as U,E as v}from"./index-BjpkzZGY.js";const B={class:"register-root"},N={__name:"Register",setup(I){const i=C(),l=p({username:"",password:"",confirm:"",role:"user"}),f=p(null),d=p(!1),c={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],confirm:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(m,e,t)=>{e!==l.value.password?t(new Error("两次输入密码不一致")):t()},trigger:"blur"}],role:[{required:!0,message:"请选择账号类型",trigger:"change"}]},w=()=>{f.value.validate(async m=>{var e,t;if(m){d.value=!0;try{await U.post("http://101.42.169.71:3000/register",{username:l.value.username,password:l.value.password,role:l.value.role}),v.success("注册成功，请登录"),i.push("/login")}catch(a){v.error(((t=(e=a.response)==null?void 0:e.data)==null?void 0:t.error)||"注册失败")}finally{d.value=!1}}})},V=()=>{i.push("/login")};return(m,e)=>{const t=u("el-input"),a=u("el-form-item"),_=u("el-radio"),b=u("el-radio-group"),g=u("el-button"),y=u("el-form"),x=u("el-card");return q(),k("div",B,[o(x,{class:"register-card"},{default:r(()=>[e[8]||(e[8]=E("h2",{class:"register-title"},"注册新账号",-1)),o(y,{model:l.value,rules:c,ref_key:"formRef",ref:f,"label-width":"100px"},{default:r(()=>[o(a,{label:"用户名",prop:"username"},{default:r(()=>[o(t,{modelValue:l.value.username,"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.username=s),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(a,{label:"密码",prop:"password"},{default:r(()=>[o(t,{modelValue:l.value.password,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.password=s),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(a,{label:"确认密码",prop:"confirm"},{default:r(()=>[o(t,{modelValue:l.value.confirm,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.confirm=s),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(a,{label:"账号类型",prop:"role"},{default:r(()=>[o(b,{modelValue:l.value.role,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.role=s)},{default:r(()=>[o(_,{label:"user"},{default:r(()=>e[4]||(e[4]=[n("普通用户")])),_:1,__:[4]}),o(_,{label:"admin"},{default:r(()=>e[5]||(e[5]=[n("管理员")])),_:1,__:[5]})]),_:1},8,["modelValue"])]),_:1}),o(a,null,{default:r(()=>[o(g,{type:"primary",onClick:w,loading:d.value},{default:r(()=>e[6]||(e[6]=[n("注册")])),_:1,__:[6]},8,["loading"]),o(g,{type:"text",onClick:V},{default:r(()=>e[7]||(e[7]=[n("返回登录")])),_:1,__:[7]})]),_:1})]),_:1},8,["model"])]),_:1,__:[8]})])}}},M=R(N,[["__scopeId","data-v-d3714d21"]]);export{M as default};
